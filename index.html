<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ATM Banking System | Glassmorphism</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
</head>
<body>
<a class="skip-link" href="#mainContent">Skip to main content</a>
<div class="toast-container" id="toastContainer"></div>

<!-- Confirmation Modal -->
<div class="modal-overlay" id="confirmModalOverlay" role="dialog" aria-modal="true">
<div class="modal" id="confirmModal">
<h3 id="confirmTitle" style="margin-bottom:10px;">Confirm</h3>
<div id="confirmBody"></div>
<div class="modal-actions">
<button class="secondary" id="confirmCancelBtn">Cancel</button>
<button id="confirmOkBtn">Confirm</button>
</div>
</div>
</div>

<!-- OTP Modal -->
<div class="modal-overlay" id="otpModalOverlay" role="dialog" aria-modal="true">
<div class="modal" id="otpModal">
<h3 style="margin-bottom:10px;">Enter One-Time Password</h3>
<p class="tiny" id="otpSentInfo"></p>
<div class="form-group" style="margin-top:10px;">
<label>OTP Code</label>
<input type="text" id="otpInput" placeholder="6-digit code" maxlength="6" inputmode="numeric">
</div>
<div class="modal-actions">
<button class="secondary" id="otpCancelBtn">Cancel</button>
<button id="otpVerifyBtn">Verify</button>
</div>
</div>
</div>

<div class="container" id="mainContainer">
<div class="header">
<div class="header-left">
<button class="glass-btn" id="darkModeToggle" onclick="toggleDarkMode()" aria-label="Toggle dark mode">‚òΩ</button> <div>
<h1 id="pageTitle">AUREUM BANK</h1>
<p id="pageSubtitle">Secure Banking Experience</p>
</div>
</div>

<div class="header-right">
<button class="glass-btn back-btn" onclick="goBack()" id="backBtn" style="display: none;" aria-label="Go back"><</button>
<button class="glass-btn logout-btn" onclick="logout()" id="logoutBtn" style="display: none;" aria-label="Logout">Logout</button>
</div>
</div>

<div class="content" id="mainContent">
<div id="loginPage" class="page active">
<div style="margin-bottom: 30px;">
<h2 style="color: var(--text-primary); margin-bottom: 20px; text-align: center;">Welcome to ATM</h2>
</div>
<div class="form-group">
<label>Username</label>
<input type="text" id="loginUsername" placeholder="Enter your username" autocomplete="username">
</div>

<div class="form-group pin-eye-group">
<label>PIN</label>
<input type="text" id="loginPin" class="pin-input" placeholder="Enter your PIN" readonly onclick="showKeypad('loginPin', 4, 6)" aria-label="PIN input">
</div>

<div id="loginMessage" aria-live="polite"></div>

<button onclick="login()">Login</button>

<div style="margin-top: 15px;">
<button class="secondary" onclick="showPage('signupPage')">Create New Account</button>
</div>
<div style="margin-top: 15px;">
<button class="secondary" onclick="showPage('forgotPinPage')">Forgot PIN?</button>
</div>
<div style="margin-top: 15px;">
<button class="secondary" onclick="tryBiometricLogin()">Login with Biometrics</button>
</div>
</div>

<div id="signupPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Create Account</h2>

<div class="form-group">
<label>First Name</label>
<input type="text" id="signupFname" placeholder="Enter first name" autocomplete="given-name">
</div>

<div class="form-group">
<label>Middle Name</label>
<input type="text" id="signupMname" placeholder="Enter middle name" autocomplete="additional-name">
</div>

<div class="form-group">
<label>Last Name</label>
<input type="text" id="signupLname" placeholder="Enter last name" autocomplete="family-name">
</div>

<div class="form-group">
<label>Phone Number</label>
<input type="tel" id="signupPhone" placeholder="Enter phone number (digits only)" pattern="\d{10,15}" inputmode="numeric" autocomplete="tel">
</div>

<div class="form-group">
<label>Address</label>
<textarea id="signupAddress" placeholder="Enter full address" autocomplete="street-address"></textarea>
</div>

<div class="form-group">
<label>Age</label>
<input type="number" id="signupAge" placeholder="Enter age" min="10" max="120">
</div>

<div class="form-group">
<label>Birthday (YYYY-MM-DD)</label>
<input type="text" id="signupBirthday" placeholder="2000-01-15" inputmode="numeric" pattern="\d{4}-\d{2}-\d{2}" autocomplete="bday">
</div>

<div class="form-group">
<label>Account Type</label>
<select id="signupAccountType">
<option value="savings">Savings (1.5% monthly, ‚Ç±10k limit/day)</option>
<option value="checking">Checking (0.5% monthly, ‚Ç±50k limit/day)</option>
<option value="premium">Premium (2.5% monthly, ‚Ç±100k limit/day)</option>
</select>
</div>

<div style="margin-top: 30px;">
<h3 style="color: var(--coral); margin-bottom: 15px;">Security Questions (For PIN Recovery)</h3>
</div>

<div class="form-group">
<label>Security Question</label>
<select id="signupQuestion">
<option value="mother">What is your mother's maiden name?</option>
<option value="pet">What was the name of your first pet?</option>
<option value="city">What city were you born in?</option>
</select>
</div>

<div class="form-group">
<label>Security Answer</label>
<input type="text" id="signupAnswer" placeholder="Enter your answer">
</div>
<div class="form-group">
<label>Username</label>
<input type="text" id="signupUsername" placeholder="Create username" autocomplete="new-username">
</div>

<div class="form-group pin-eye-group">
<label>PIN (4-6 digits)</label>
<input type="text" id="signupPin" class="pin-input" placeholder="Create PIN" readonly onclick="showKeypad('signupPin', 4, 6)" aria-label="Create PIN">
</div>

<div class="form-group pin-eye-group">
<label>Confirm PIN</label>
<input type="text" id="signupConfirmPin" class="pin-input" placeholder="Confirm PIN" readonly onclick="showKeypad('signupConfirmPin', 4, 6)" aria-label="Confirm PIN">
</div>

<div id="signupMessage" aria-live="polite"></div>

<button onclick="signup()">Sign Up</button>

<div style="margin-top: 15px;">
<button class="secondary" onclick="showPage('loginPage')">‚Üê Back to Login</button>
</div>
</div>

<div id="dashboardPage" class="page">
<div class="account-info">
<div style="font-size: 18px; margin-bottom: 15px;">
Hello, <span id="userGreeting" style="font-weight: 700;"></span>! 
</div>
<div class="account-info-item">
<span id="dashboardUsername"></span>
</div>
<div class="account-info-item">
<span id="dashboardBalance"></span>
</div>
<div class="balance-display" id="dashboardBalanceDisplay"></div>

<div class="atm-card" id="atmCardDashboard">
<div class="glow"></div>
<div class="row">
<div class="brand">Virtual ATM Card</div>
<div class="chip"></div>
</div>
<div class="number" id="cardNumberDisplay">**** **** **** 1234</div>
<div class="row" style="margin-bottom:8px;">
<div>
<div class="label">CARDHOLDER</div>
<div class="name" id="cardNameDisplay">USER NAME</div>
</div>
<div>
<div class="label">CURRENCY</div>
<div class="value" id="cardCurrencyDisplay">PHP</div>
</div>
</div>
<div class="footer">
<div>
<div class="label">BALANCE</div>
<div class="balance" id="cardBalanceDisplay">PHP 0.00</div>
</div>
<div>
<div class="label">VALID THRU</div>
<div class="value">12/30</div>
</div>
</div>
</div>
</div>

<div class="menu-grid" role="navigation" aria-label="Main menu">
<button class="menu-btn" style="--icon:url('https://img.icons8.com/ios-filled/100/user-male-circle.png')" onclick="showPage('viewAccountPage')">
<span class="label">View Account</span>
<span class="sub">Profile & details</span>
</button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/money-bag.png')" onclick="showPage('withdrawPage')">
<span class="label">Withdraw</span>
<span class="sub">Cash out</span>
</button>
<button class="menu-btn" style="--icon:url('https://img.icons8.com/ios-filled/100/wallet.png')" onclick="showPage('depositPage')">
<span class="label">Deposit</span>
<span class="sub">Add funds</span>
</button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/money-transfer.png')" onclick="showPage('transferPage')">
<span class="label">Transfer</span>
<span class="sub">Send money</span>
</button>
<button class="menu-btn" style="--icon:url('https://img.icons8.com/ios-filled/100/request-money.png')" onclick="showPage('billPayPage')">
<span class="label">Bill Pay</span>
<span class="sub">Utilities</span>
</button>
<button class="menu-btn gray" style="--icon:url('https://i.postimg.cc/fLQXw3mT/black-isolated-icon-of-two-cogwheels-on-white-background-silhouette-of-gear-wheel-flat-removebg-prev.png')" onclick="showPage('settingsPage')">
<span class="label">Settings</span>
<span class="sub">Manage account</span>
</button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/combo-chart.png')" onclick="showPage('statementPage')">
<span class="label">Statement</span>
<span class="sub">Transactions</span>
</button>
<button class="menu-btn" style="--icon:url('https://img.icons8.com/ios-filled/100/goal.png')" onclick="showPage('goalsPage')">
<span class="label">Savings Goals</span>
<span class="sub">Track progress</span>
</button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/bar-chart.png')" onclick="showPage('analyticsPage')">
<span class="label">Analytics</span>
<span class="sub">Spending</span>
</button>
<button class="menu-btn gray" style="--icon:url('https://img.icons8.com/ios-filled/100/conference-call.png')" onclick="showPage('leaderboardPage')">
<span class="label">Leaderboard</span>
<span class="sub">Top savers</span>
</button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/appointment-reminders.png')" onclick="showPage('scheduledPage')">
<span class="label">Scheduled</span>
<span class="sub">Auto transfers</span>
</button>
<button class="menu-btn" style="--icon:url('https://img.icons8.com/ios-filled/100/request-money.png')" onclick="showPage('requestsPage')">
<span class="label">Requests</span>
<span class="sub">Ask/approve</span>
</button>
<button class="menu-btn gray" style="--icon:url('https://img.icons8.com/ios-filled/100/medal.png')" onclick="showPage('achievementsPage')">
<span class="label">Badges</span>
<span class="sub">Achievements</span>
</button>
<button class="menu-btn" style="--icon:url('https://img.icons8.com/ios-filled/100/appointment-reminders.png')" onclick="showPage('notificationsPage')">
<span class="label">Notifications</span>
<span class="sub">Notification Center</span>
</button>
</div>
</div>

<div id="notificationsPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Notification Center</h2>
<div class="flex" style="margin-bottom:16px; gap:10px; flex-wrap:wrap;">
<button class="secondary" style="flex:1; min-width:160px;" onclick="markAllNotificationsAsRead()">Mark all as read</button>
<button class="secondary" style="flex:1; min-width:160px;" onclick="clearLocalNotificationsView()">Delete All</button>
</div>
<div class="transaction-list" id="notificationsListPage"></div>
</div>

<div id="receiptPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Transaction Receipt</h2>
<div id="receiptContent">
<p style="text-align: center;">-----------------------------------</p>
<h3>ATM TRANSACTION RECEIPT</h3>
<div class="receipt-item"><label>ACCOUNT ID:</label><span id="receiptAccountId"></span></div>
<div class="receipt-item"><label>DATE/TIME:</label><span id="receiptDateTime"></span></div>
<p style="margin-top: 10px; border-top: 1px dashed black; padding-top: 10px;">&nbsp;</p>

<div class="receipt-item"><label>TYPE:</label><span id="receiptType"></span></div>
<div class="receipt-item"><label>AMOUNT:</label><span id="receiptAmount"></span></div>
<div id="receiptFee" class="receipt-item" style="display: none;"><label>FEE:</label><span></span></div>
<div id="receiptRecipient" class="receipt-item" style="display: none;"><label>RECIPIENT:</label><span></span></div>
<div id="receiptNote" class="receipt-item" style="display: none;"><label>NOTE:</label><span></span></div>
<div id="receiptCategory" class="receipt-item" style="display: none;"><label>CATEGORY:</label><span></span></div>

<p style="margin-top: 10px; border-top: 1px dashed black; padding-top: 10px;">&nbsp;</p>
<div class="receipt-item"><label>NEW BALANCE:</label><span id="receiptNewBalance" style="font-weight: 700; font-size: 16px;"></span></div>

<div class="receipt-footer">THANK YOU FOR BANKING WITH US!</div>
<p style="text-align: center;">-----------------------------------</p>
</div>
<div style="margin-top: 20px;">
 <button class="secondary" onclick="window.print()">Print</button>
</div>
<div style="margin-top: 10px;">
 <button class="secondary" onclick="showPage('dashboardPage')">Done</button>
</div>
</div>

<div id="forgotPinPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">PIN Recovery</h2>
<div id="pinRecoveryMessage" aria-live="polite"></div>
<div class="form-group" id="recoveryStep1">
<label>Account Username</label>
<input type="text" id="recoveryUsername" placeholder="Enter your username">
<button style="margin-top: 10px;" onclick="startPinRecovery()">Find Account</button>
</div>
<div id="recoveryStep2" style="display: none;">
<div class="info-box warning" style="margin-bottom: 15px;">Please answer your security question to reset your PIN.</div>
<div class="form-group">
<label id="securityQuestionDisplay"></label>
<input type="text" id="securityAnswerInput" placeholder="Enter your answer">
</div>
<button onclick="verifyPinAnswer()">Verify Answer</button>
</div>
<div id="recoveryStep3" style="display: none;">
 <div class="info-box success" style="margin-bottom: 15px;">Verification successful! Set your new PIN below.</div>
<div class="form-group pin-eye-group">
<label>New PIN (4-6 digits)</label>
<input type="text" id="recoveryNewPin" class="pin-input" placeholder="New PIN" readonly onclick="showKeypad('recoveryNewPin', 4, 6)">
</div>
<div class="form-group pin-eye-group">
<label>Confirm New PIN</label>
<input type="text" id="recoveryConfirmPin" class="pin-input" placeholder="Confirm New PIN" readonly onclick="showKeypad('recoveryConfirmPin', 4, 6)">
</div>
<button onclick="setNewPin()">Set New PIN</button>
</div>
<div style="margin-top: 20px;">
<button class="secondary" onclick="showPage('loginPage')">‚Üê Back to Login</button>
</div>
</div>

<div id="viewAccountPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Account Information</h2>
<div class="form-group">
<label>Full Name</label>
<div class="display-field" id="viewAccountFullName"></div>
</div>
<div class="form-group">
<label>Username</label>
<b><div class="display-field" id="viewAccountUsername"></div></b>
</div>
<div class="form-group">
<label>Birthday</label>
<b><div class="display-field" id="viewAccountBirthday"></div></b>
</div>
<div class="form-group">
<label>Phone</label>
<b><div class="display-field" id="viewAccountPhone"></div></b>
</div>
<div class="form-group">
<label>Address</label>
<b><div class="display-field" id="viewAccountAddress"></div></b>
</div>
<div class="form-group">
<label>Age</label>
<b><div class="display-field" id="viewAccountAge"></div></b>
</div>
<div class="form-group">
<label>Account Type</label>
<b><div class="display-field" id="viewAccountType"></div></b>
</div>
<div class="form-group">
<label>Balance</label>
<div style="padding: 14px; background: rgba(212, 175, 55, 0.18); border-radius: 12px; color: var(--text-primary); font-weight: 700; font-size: 18px; border: 1px solid rgba(255,255,255,0.08);">
‚Ç±<span id="viewAccountBalance">0.00</span>
</div>
</div>

<!-- VIEW ATM CARD (added so renderAtmCard('view') can update) -->
<div class="atm-card" id="atmCardView" style="max-width:320px; margin-top:16px;">
<div class="glow"></div>
<div class="row">
<div class="brand">Virtual ATM Card</div>
<div class="chip"></div>
</div>
<div class="number" id="cardNumberDisplayView">**** **** **** 1234</div>
<div class="row" style="margin-bottom:8px;">
<div>
<div class="label">CARDHOLDER</div>
<div class="name" id="cardNameDisplayView">USER NAME</div>
</div>
<div>
<div class="label">CURRENCY</div>
<div class="value" id="cardCurrencyDisplayView">PHP</div>
</div>
</div>
<div class="footer">
<div>
<div class="label">BALANCE</div>
<div class="balance" id="cardBalanceDisplayView">PHP 0.00</div>
</div>
<div>
<div class="label">VALID THRU</div>
<div class="value">12/30</div>
</div>
</div>
</div>
</div>

<div id="adminViewUserPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">üë§ Viewing Account Details</h2>
<div class="form-group"><label>Full Name</label><div class="display-field" id="adminViewFullName"></div></div>
<div class="form-group"><label>Username</label><div class="display-field" id="adminViewUsername"></div></div>
<div class="form-group"><label>Birthday</label><div class="display-field" id="adminViewBirthday"></div></div>
<div class="form-group"><label>Phone</label><div class="display-field" id="adminViewPhone"></div></div>
<div class="form-group"><label>Address</label><div class="display-field" id="adminViewAddress"></div></div>
<div class="form-group"><label>Age</label><div class="display-field" id="adminViewAge"></div></div>
<div class="form-group">
<label>Account Type</label>
<div class="display-field" id="adminViewType"></div>
</div>
<div class="form-group">
<label>Balance</label>
<div style="padding: 14px; background: rgba(212, 175, 55, 0.18); border-radius: 12px; color: var(--text-primary); font-weight: 700; font-size: 18px; border: 1px solid rgba(255,255,255,0.08);">
‚Ç±<span id="adminViewBalance">0.00</span>
</div>
</div>
</div>

<div id="withdrawPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Withdrawal</h2>
<div id="withdrawMessage" aria-live="polite"></div>
<div class="form-group">
<label>Withdrawal Amount (‚Ç±)</label>
<input type="number" id="withdrawAmount" placeholder="Enter amount" min="0" step="0.01" onchange="calculateWithdrawFee()" oninput="calculateWithdrawFee()">
</div>
<div class="form-group">
<label>Category</label>
<select id="withdrawCategory">
<option value="Bills">Bills</option>
<option value="Food">Food</option>
<option value="Transportation">Transportation</option>
<option value="Shopping">Shopping</option>
<option value="Entertainment">Entertainment</option>
<option value="Others">Others</option>
</select>
</div>
<div class="form-group">
<label>Note / Memo</label>
<textarea id="withdrawNote" placeholder="Optional note"></textarea>
</div>
<div id="withdrawSummary" class="summary-box" style="display: none;">
<div class="summary-item"><span>Withdrawal Amount:</span><span>‚Ç±<span id="withdrawSummaryAmount">0.00</span></span></div>
<div class="summary-item"><span>Transaction Fee (2%):</span><span>‚Ç±<span id="withdrawSummaryFee">0.00</span></span></div>
<div class="summary-item"><span>Total Debit:</span><span>‚Ç±<span id="withdrawSummaryTotal">0.00</span></span></div>
<div class="summary-item"><span>Daily Limit Remaining:</span><span id="withdrawLimitRemaining">-</span></div>
</div>
<button onclick="processWithdraw()">Confirm Withdrawal</button>
</div>

<div id="depositPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Deposit</h2>
<div id="depositMessage" aria-live="polite"></div>
<div class="form-group">
<label>Deposit Amount (‚Ç±)</label>
<input type="number" id="depositAmount" placeholder="Enter amount" min="0" step="0.01">
</div>
<div class="form-group">
<label>Category</label>
<select id="depositCategory">
<option value="Salary">Salary</option>
<option value="Gift">Gift</option>
<option value="Business">Business</option>
<option value="Allowance">Allowance</option>
<option value="Others">Others</option>
</select>
</div>
<div class="form-group">
<label>Note / Memo</label>
<textarea id="depositNote" placeholder="Optional note"></textarea>
</div>
<button onclick="processDeposit()">Confirm Deposit</button>
</div>

<div id="transferPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Transfer</h2>
<div id="transferMessage" aria-live="polite"></div>
<div class="form-group">
<label>Recipient Username</label>
<input type="text" id="transferUsername" placeholder="Enter recipient username" onchange="verifyTransferRecipient()">
</div>
<div class="form-group">
<label>Quick Favorites</label>
<div id="favoritesList" class="flex"></div>
</div>
<div id="transferRecipientInfo" style="display: none;">
<div class="info-box success"><strong>Recipient:</strong> <span id="transferRecipientName"></span></div>
</div>
<div class="form-group">
<label>Transfer Amount (‚Ç±)</label>
<input type="number" id="transferAmount" placeholder="Enter amount" min="0" step="0.01">
</div>
<div class="form-group">
<label>Category</label>
<select id="transferCategory">
<option value="Family">Family</option>
<option value="Bills">Bills</option>
<option value="Allowance">Allowance</option>
<option value="Debt">Debt</option>
<option value="Others">Others</option>
</select>
</div>
<div class="form-group">
<label>Note / Memo</label>
<textarea id="transferNote" placeholder="Optional note"></textarea>
</div>
<div class="summary-box" id="transferLimitsBox">
<div>Daily Transfer Remaining: <span id="transferDailyRemain">-</span></div>
<div>Monthly Transfer Remaining: <span id="transferMonthlyRemain">-</span></div>
</div>
<button onclick="processTransfer()">Confirm Transfer</button>
</div>

<div id="billPayPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Bill Payment</h2>
<div id="billPayMessage" aria-live="polite"></div>
<div class="form-group">
<label>Select Biller</label>
<select id="billPayBiller"></select>
</div>
<div class="form-group">
<label>Account / Reference Number</label>
<input type="text" id="billPayAccount" placeholder="Enter account/reference number">
</div>
<div class="form-group">
<label>Amount (‚Ç±)</label>
<input type="number" id="billPayAmount" placeholder="Enter amount" min="0" step="0.01">
</div>
<div class="form-group">
<label>Note</label>
<textarea id="billPayNote" placeholder="Optional note"></textarea>
</div>
<button onclick="processBillPayment()">Pay Bill</button>
</div>

<div id="settingsPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Settings</h2>
<div class="menu-grid" role="navigation" aria-label="Settings menu">
<button class="menu-btn gray" style="--icon:url('https://img.icons8.com/ios-filled/100/lock-2.png')" onclick="showPage('changePinPage')"><span class="label">Change PIN</span><span class="sub">Update security</span></button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/name.png')" onclick="showPage('changeNamePage')"><span class="label">Change Name</span><span class="sub">Profile info</span></button>
<button class="menu-btn" style="--icon:url('https://img.icons8.com/ios-filled/100/phone.png')" onclick="showPage('changePhonePage')"><span class="label">Change Phone</span><span class="sub">Contact</span></button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/address.png')" onclick="showPage('changeAddressPage')"><span class="label">Change Address</span><span class="sub">Location</span></button>
<button class="menu-btn gray" style="--icon:url('https://i.postimg.cc/jqFgzTVG/synchronize-user-profile-sign-account-600nw-2100729622-removebg-preview.png')" onclick="showPage('changeUsernamePage')"><span class="label">Change Username</span><span class="sub">Login ID</span></button>
<button class="menu-btn" style="--icon:url('https://img.icons8.com/ios-filled/100/fingerprint.png')" onclick="enableBiometricFlow()"><span class="label">Biometrics</span><span class="sub">Enable WebAuthn</span></button>
</div>
</div>

<div id="changePinPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Change PIN</h2>
<div id="changePinMessage" aria-live="polite"></div>
<div class="form-group pin-eye-group"><label>Current PIN</label><input type="text" id="changePinOld" class="pin-input" placeholder="Enter current PIN" readonly onclick="showKeypad('changePinOld', 4, 6)"></div>
<div class="form-group pin-eye-group"><label>New PIN (4-6 digits)</label><input type="text" id="changePinNew" class="pin-input" placeholder="Enter new PIN" readonly onclick="showKeypad('changePinNew', 4, 6)"></div>
<div class="form-group pin-eye-group"><label>Confirm New PIN</label><input type="text" id="changePinConfirm" class="pin-input" placeholder="Confirm new PIN" readonly onclick="showKeypad('changePinConfirm', 4, 6)"></div>
<button onclick="processChangePin()">Update PIN</button>
</div>

<div id="changeNamePage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Change Name</h2>
<div id="changeNameMessage" aria-live="polite"></div>
<div class="form-group"><label>First Name</label><input type="text" id="changeNameFname" placeholder="Enter first name"></div>
<div class="form-group"><label>Middle Name</label><input type="text" id="changeNameMname" placeholder="Enter middle name"></div>
<div class="form-group"><label>Last Name</label><input type="text" id="changeNameLname" placeholder="Enter last name"></div>
<button onclick="processChangeName()">Update Name</button>
</div>

<div id="changePhonePage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Change Phone Number</h2>
<div id="changePhoneMessage" aria-live="polite"></div>
<div class="form-group"><label>New Phone Number</label><input type="tel" id="changePhoneNew" placeholder="Enter new phone number" pattern="\d{10,15}" inputmode="numeric"></div>
<button onclick="processChangePhone()">Update Phone</button>
</div>

<div id="changeAddressPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Change Address</h2>
<div id="changeAddressMessage" aria-live="polite"></div>
<div class="form-group"><label>New Address</label><textarea id="changeAddressNew" placeholder="Enter new address"></textarea></div>
<button onclick="processChangeAddress()">Update Address</button>
</div>

<div id="changeUsernamePage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Change Username</h2>
<div id="changeUsernameMessage" aria-live="polite"></div>
<div class="form-group"><label>Confirm Current Username</label><input type="text" id="changeUsernameOld" placeholder="Enter your current username"></div>
<div class="form-group"><label>New Username</label><input type="text" id="changeUsernameNew" placeholder="Enter new username"></div>
<button onclick="processChangeUsername()">Update Username</button>
</div>

<div id="statementPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Transaction Statement</h2>
<div class="transaction-list" id="statementList"><div class="info-box">Loading transactions...</div></div>
</div>

<div id="goalsPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Savings Goals</h2>
<div id="goalsMessage"></div>
<div class="section-card">
<div class="form-group"><label>Goal Name</label><input type="text" id="goalName" placeholder="e.g., New Phone"></div>
<div class="form-group"><label>Target Amount (‚Ç±)</label><input type="number" id="goalTarget" min="0" step="0.01" placeholder="e.g., 15000"></div>
<div class="form-group"><label>Target Date (optional)</label><input type="date" id="goalDate"></div>
<button onclick="addGoal()">Add Goal</button>
</div>
<div id="goalsList" class="transaction-list"></div>
</div>

<div id="analyticsPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Spending & Income Analytics</h2>
<div class="section-card" id="analyticsSummary"></div>
<div class="section-card" id="categoryBreakdown"></div>
<div class="section-card" id="insightsBox"></div>
</div>

<div id="leaderboardPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Leaderboard</h2>
<div class="section-card" id="leaderboardList"></div>
</div>

<div id="scheduledPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Scheduled Transfers</h2>
<div id="scheduledMessage"></div>
<div class="section-card">
<div class="form-group"><label>Recipient Username</label><input type="text" id="schedUser" placeholder="username"></div>
<div class="form-group"><label>Amount (‚Ç±)</label><input type="number" id="schedAmount" min="0" step="0.01"></div>
<div class="form-group"><label>Frequency</label>
<select id="schedFrequency">
<option value="daily">Daily</option>
<option value="weekly">Weekly</option>
<option value="monthly">Monthly</option>
</select>
</div>
<div class="form-group"><label>Start Date</label><input type="date" id="schedStart"></div>
<div class="form-group"><label>Note (optional)</label><textarea id="schedNote"></textarea></div>
<button onclick="addScheduledTransfer()">Add Scheduled Transfer</button>
</div>
<div class="transaction-list" id="scheduledList"></div>
</div>

<div id="requestsPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Money Requests</h2>
<div id="requestsMessage"></div>
<div class="section-card">
<div class="form-group"><label>Request From (username)</label><input type="text" id="reqFrom"></div>
<div class="form-group"><label>Amount (‚Ç±)</label><input type="number" id="reqAmount" min="0" step="0.01"></div>
<div class="form-group"><label>Reason</label><textarea id="reqReason" placeholder="Why are you requesting?"></textarea></div>
<button onclick="sendRequest()">Send Request</button>
</div>
<div class="section-card">
<h4>Pending Requests For You</h4>
<div id="requestsForMe" class="transaction-list"></div>
</div>
<div class="section-card">
<h4>Your Sent Requests</h4>
<div id="requestsByMe" class="transaction-list"></div>
</div>
</div>

<div id="achievementsPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Achievements</h2>
<div id="achievementsList" class="section-card"></div>
</div>

<div id="adminDashboardPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Admin Control Panel</h2>
<div class="info-box warning" aria-live="polite">Welcome Mr.Kirby!</div>
<div class="menu-grid" role="navigation" aria-label="Admin control menu">
<button class="menu-btn" style="--icon:url('https://i.ibb.co/j1V3q7W/show-property-removebg-preview.png')" onclick="showPage('adminViewAccountsPage')"><span class="label">View All Accounts</span><span class="sub">List users</span></button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/edit-file.png')" onclick="showPage('adminModifyAccountPage')"><span class="label">Modify Account</span><span class="sub">Edit user</span></button>
<button class="menu-btn gray" style="--icon:url('https://img.icons8.com/ios-filled/100/delete-user-male.png')" onclick="showPage('adminDeleteAccountPage')"><span class="label">Delete Account</span><span class="sub">Remove user</span></button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/document.png')" onclick="showPage('adminTransactionHistoryMenu')"><span class="label">Transaction Histories</span><span class="sub">Reports</span></button>
<button class="menu-btn" style="--icon:url('https://img.icons8.com/ios-filled/100/phone-office.png')" onclick="adminViewPhoneNumbers()"><span class="label">View Phone Numbers</span><span class="sub">Contacts</span></button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/search--v1.png')" onclick="showPage('adminSearchNamePage')"><span class="label">Search User</span><span class="sub">Find users</span></button>
<button class="menu-btn gray" style="--icon:url('https://img.icons8.com/ios-filled/100/combo-chart.png')" onclick="adminViewTransactionChart()"><span class="label">View System Summary</span><span class="sub">Charts</span></button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/receive-cash.png')" onclick="adminApplyInterest()"><span class="label">Apply Interest</span><span class="sub">Per type</span></button>
<button class="menu-btn" style="--icon:url('https://img.icons8.com/ios-filled/100/marker.png')" onclick="showPage('adminViewLocationsMenuPage')"><span class="label">Locations Report</span><span class="sub">Users by area</span></button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/upload.png')" onclick="exportData()"><span class="label">Export Data</span><span class="sub">JSON backup</span></button>
<button class="menu-btn gray" style="--icon:url('https://img.icons8.com/ios-filled/100/download.png')" onclick="triggerImport()"><span class="label">Import Data</span><span class="sub">Restore</span></button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/high-importance.png')" onclick="adminSystemReboot()"><span class="label">SYSTEM REBOOT</span><span class="sub">Clear data</span></button>
</div>
<input type="file" id="adminImportInput" accept="application/json" style="display:none">
<div id="adminDataMessage" aria-live="polite"></div>
</div>

<div id="adminViewAccountsPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">All Registered Accounts</h2>
<div class="transaction-list" id="adminAccountList"></div>
</div>

<div id="adminViewPhoneNumbersPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">All Registered Phone Numbers</h2>
<div class="transaction-list" id="adminPhoneList"></div>
</div>

<div id="adminSearchNamePage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Search User by Username/Name</h2>
<div class="admin-account-container">
<div class="form-group">
<label>Search Username (Filter List)</label>
<input type="text" id="adminListFilterSearchName" placeholder="Type username or name to filter" onkeyup="filterAccountList('adminListFilterSearchName', 'adminSearchListDisplay')">
</div>
<div class="admin-account-list-scroll" id="adminSearchListDisplay"></div>
</div>
</div>

<div id="adminViewTransactionChartPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Global Transaction Chart</h2>
<div id="systemBarChart"></div>
<div id="adminTransactionChartSummary">
<div class="info-box success"><strong style="font-size: 16px;">System Totals Summary</strong></div>
<div class="stat-grid" id="chartStats"></div>
</div>
</div>

<div id="adminDeleteAccountPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;"> Delete User Account</h2>
<div class="admin-account-container">
<div class="form-group">
<label>Search Username (Filter List)</label>
<input type="text" id="adminListFilterDelete" placeholder="Type username to filter the list below" onkeyup="filterAccountList('adminListFilterDelete', 'adminDeleteListDisplay')">
</div>
<div class="admin-account-list-scroll" id="adminDeleteListDisplay"></div>
</div>
<div id="adminDeleteMessage" aria-live="polite"></div>
</div>

<div id="adminModifyAccountPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Modify User Account</h2>
<div class="admin-account-container">
<div class="form-group">
<label>Search Username (Filter List)</label>
<input type="text" id="adminListFilterModify" placeholder="Type username to filter the list below" onkeyup="filterAccountList('adminListFilterModify', 'adminModifyListDisplay')">
</div>
<div class="admin-account-list-scroll" id="adminModifyListDisplay"></div>
</div>
<div id="adminModifyMessage" aria-live="polite"></div>
</div>

<div id="adminEditUserPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Edit Account: <span id="modifiedUsernameDisplay"></span></h2>
<div id="adminEditMessage" aria-live="polite"></div>
<div class="info-box warning" style="margin-bottom: 20px;">‚ö†Ô∏è Admin Power: You can directly set the user's balance here.</div>
<div class="form-group"><label>First Name</label><input type="text" id="modifyFname"></div>
<div class="form-group"><label>Last Name</label><input type="text" id="modifyLname"></input></div>
<div class="form-group"><label>New Balance (Admin Power)</label><input type="number" id="modifyBalance" step="0.01" min="0"></div>
<div class="form-group"><label>Phone Number</label><input type="tel" id="modifyPhone" pattern="\d{10,15}" inputmode="numeric"></div>
<div class="form-group">
<label>Account Type</label>
<select id="modifyAccountType">
<option value="savings">Savings</option>
<option value="checking">Checking</option>
<option value="premium">Premium</option>
</select>
</div>
<div style="margin-top: 30px;">
<h3 style="color: var(--coral); margin-bottom: 15px;">Change PIN (Optional)</h3>
</div>
<div class="form-group pin-eye-group"><label>New PIN (4-6 digits) - Leave blank to keep current PIN</label><input type="text" id="adminModifyNewPin" class="pin-input" placeholder="Enter new PIN" readonly onclick="showKeypad('adminModifyNewPin', 4, 6)"></div>
<div class="form-group pin-eye-group"><label>Confirm New PIN</label><input type="text" id="adminModifyConfirmPin" class="pin-input" placeholder="Confirm new PIN" readonly onclick="showKeypad('adminModifyConfirmPin', 4, 6)"></div>
<button onclick="processModifyAccount()">Apply Changes</button>
</div>

<div id="adminTransactionHistoryMenu" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Transaction History Reports</h2>
<div class="menu-grid" role="navigation" aria-label="Transaction history menu">
<button class="menu-btn" style="--icon:url('https://i.ibb.co/yBdGKgwd/cash-withdraw-icon-in-illustration-vector-removebg-preview.png')" onclick="renderTransactionHistory('withdraw')"><span class="label">All Withdrawals</span><span class="sub">History</span></button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/money-bag.png')" onclick="renderTransactionHistory('deposit')"><span class="label">All Deposits</span><span class="sub">History</span></button>
<button class="menu-btn gray" style="--icon:url('https://img.icons8.com/ios-filled/100/money-transfer.png')" onclick="renderTransactionHistory('transfer')"><span class="label">All Transfers</span><span class="sub">History</span></button>
<button class="menu-btn alt" style="--icon:url('https://img.icons8.com/ios-filled/100/request-money.png')" onclick="renderTransactionHistory('bill')"><span class="label">All Bill Pays</span><span class="sub">History</span></button>
</div>
</div>

<div id="adminTransactionHistoryPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;" id="adminHistoryTitle"></h2>
<div class="transaction-list" id="adminHistoryList">
<div class="info-box">Loading...</div>
</div>
</div>

<div id="adminViewLocationsMenuPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Users by Location</h2>
<div class="info-box warning" id="locationsMessage" style="display: none;" aria-live="polite"></div>
<div class="menu-grid" id="adminLocationsList" role="navigation" aria-label="Locations menu">
<div class="info-box">Loading Locations...</div>
</div>
</div>

<div id="adminLocationDetailPage" class="page">
<h2 style="color: var(--text-primary); margin-bottom: 20px;">Users at <span id="locationDetailAddress"></span></h2>
<div class="transaction-list" id="adminLocationUserList"></div>
<div style="margin-top: 15px;"><p style="font-size: 12px; color: #666;">* The user marked with 'üëë' is the richest at this address.</p></div>
</div>
</div>
</div>

<div class="virtual-keypad-container" id="virtualKeypadContainer">
<div class="virtual-keypad">
<button class="keypad-btn" onclick="keypadInput('1')" aria-label="Key 1">1</button>
<button class="keypad-btn" onclick="keypadInput('2')" aria-label="Key 2">2</button>
<button class="keypad-btn" onclick="keypadInput('3')" aria-label="Key 3">3</button>
<button class="keypad-btn" onclick="keypadInput('4')" aria-label="Key 4">4</button>
<button class="keypad-btn" onclick="keypadInput('5')" aria-label="Key 5">5</button>
<button class="keypad-btn" onclick="keypadInput('6')" aria-label="Key 6">6</button>
<button class="keypad-btn" onclick="keypadInput('7')" aria-label="Key 7">7</button>
<button class="keypad-btn" onclick="keypadInput('8')" aria-label="Key 8">8</button>
<button class="keypad-btn" onclick="keypadInput('9')" aria-label="Key 9">9</button>
<button class="keypad-action-btn" onclick="hideKeypad()" aria-label="Cancel keypad">Done</button> 
<button class="keypad-btn" onclick="keypadInput('0')" aria-label="Key 0">0</button>
<button class="keypad-action-btn delete" onclick="keypadDelete()" aria-label="Delete last digit">‚å´</button>
</div>
</div>

<script type="module" src="app.js"></script>
</body>
</html>